var e=Object.defineProperty,t=(t,s,r)=>((t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r)(t,"symbol"!=typeof s?s+"":s,r);import{r as s}from"./phaser-DJe_tbjO.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var r=s();class i extends Phaser.Scene{constructor(){super({key:"Preloader"})}preload(){this.load.on("complete",()=>{this.scene.start("SceneOne")}),this.load.image("background","./assets/backgrounds/fondo.png"),this.load.image("tomato","./assets/sprites_16x16/tomato.png"),this.load.image("carrot","./assets/sprites_16x16/carrot.png")}}class n extends Phaser.GameObjects.Sprite{constructor(e,t,s,r){super(e,t,s,r),e.add.existing(this),this.setScale(2),this.setInteractive(),e.input.setDraggable(this)}}class a extends Phaser.Scene{constructor(){super({key:"SceneOne"}),t(this,"ingredients",[]),t(this,"centerX",510),t(this,"centerY",300),t(this,"centerMarker")}create(){this.add.image(0,0,"background").setOrigin(0,0).setDisplaySize(this.scale.width,this.scale.height),this.centerMarker=this.add.circle(510,300,5,65535),this.centerMarker.setStrokeStyle(2,255),this.centerMarker.setDepth(100),this.tweens.add({targets:this.centerMarker,scale:{from:1,to:1.3},alpha:{from:1,to:.6},yoyo:!0,repeat:-1,duration:500}),this.input.on("drag",(e,t,s,r)=>{t.x=s,t.y=r,this.updateCenterOfMass()}),this.input.on("dragend",(e,t)=>{this.checkDistance(t),this.updateCenterOfMass()})}addIngredient(e,t){let s=new n(this,510,300,e);s.setScale(2),this.ingredients.push({ingredient:s,type:e,mass:t}),this.updateCenterOfMass()}updateCenterOfMass(){if(this.ingredients.length>0){let e=0,t=0,s=0;if(this.ingredients.forEach(({ingredient:r,mass:i})=>{t+=r.x*i,s+=r.y*i,e+=i}),e>0){const r=t/e,i=s/e;this.centerMarker.setPosition(r,i)}}else this.centerMarker.setPosition(this.centerX,this.centerY)}checkDistance(e){const t=e.x-this.centerX,s=e.y-this.centerY;if(Math.sqrt(t*t+s*s)>150){const t=this.ingredients.findIndex(t=>t.ingredient===e);-1!==t&&(this.ingredients[t].ingredient.destroy(),this.ingredients.splice(t,1)),e.destroy()}}deleteAllIngredientes(){for(this.ingredients.forEach(({ingredient:e})=>{e.destroy()});this.ingredients.length>0;)this.ingredients.pop();this.centerMarker.setPosition(this.centerX,this.centerY)}}const o={type:r.AUTO,width:1e3,height:600,parent:"game-container",scene:[i,a]};document.addEventListener("DOMContentLoaded",()=>{new r.Game({...o,parent:"game-container"})});
